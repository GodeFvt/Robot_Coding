#include <pop7.h>
#define s0 analog(0)
#define s1 analog(1)
#define s2 analog(2)
#define s3 analog(3)
///////////////////////////////////////
#define map1 map(s0,239,990,0,100)
#define map2 map(s1,202 ,990,0,100)
#define map3 map(s2,239,990,0,100)
#define map4 map(s3,223,990,0,100)
////////////////////////////////////
#include <Servo.h>
Servo myservo;
int f1 = 0;
int f2 = 3400;
int position;
int BaseSpeed , leftMotorSpeed , rightMotorSpeed, motorSpeed, LR, error, lastError;
/////////////////////////////////////////
float Kp1 = 0.220;//0.22
float Kd1 = 8.9; //8.1
float Kp2 = 0.232;//0.210
float Kd2 = 8.1; //7.62
//////////////////////////////////////
void setup()
{
  pinMode(14, OUTPUT);
  pinMode(15, OUTPUT);
  myservo.attach(13);
  Serial.begin(9600);
  OK();
  //4=LR
  //0=กลาง
  //1=R
  //2=L

}
void loop()
{ // view();
  ////////////////////////////////////////////////////////
  times(20, 20 , 0, 130); ao();
  times(90, 90 , 0, 180); ao();
  tag(40, 40 , 0, 20); ao();
  Turn(1, 50 , 40 );  ao();

  times(20, 20 , 0, 100);
  times(85, 85 , 0, 190); ao();
  tag(20, 20 , 0, 100); ao();
  fan(4);


  times(40, 40 , 1, 100);
  times(90, 90 , 1, 405); ao();
  tag(30, 30, 1, 115); ao();
  fan(4);

  times(20, 20 , 0, 100); ao();
  times(90, 90 , 0, 200);
  tag(20, 20 , 0, 58); ao();
  Turn(2, 45  , 25 );  ao();

  times(20, 20 , 0, 150);
  times(90, 90 , 0, 100); ao();
  tag(30, 30 , 0, 20); ao();
  fan(0);

  times(40, 40 , 1, 100);
  times(90, 90 , 1, 400); ao();
  tag(30, 30, 1, 1); ao();
  times(20, 20 , 0, 130); ao();
  f1 = f1 + 1;
  delay(f2);
  ////////////////////////////////////////////////////////
  times(20, 20 , 0, 130); ao();
  times(90, 90 , 0, 180); ao();
  tag(40, 40 , 0, 20); ao();
  Turn(1, 50 , 40 );  ao();

  times(20, 20 , 0, 100);
  times(85, 85 , 0, 190); ao();
  tag(20, 20 , 0, 100); ao();
  fan(1);


  times(40, 40 , 1, 100);
  times(90, 90 , 1, 405); ao();
  tag(30, 30, 1, 115); ao();
  fan(4);

  times(20, 20 , 0, 150); ao();
  times(90, 90 , 0, 200);
  tag(20, 20 , 0, 58); ao();
  Turn(2, 45 , 25 );  ao();

  times(20, 20 , 0, 150);
  times(90, 90 , 0, 100); ao();
  tag(30, 30 , 0, 20); ao();
  fan(0);

  times(40, 40 , 1, 100);
  times(90, 90 , 1, 400); ao();
  tag(30, 30, 1, 1); ao();
  times(20, 20 , 0, 130); ao();
  f1 = f1 + 1;
  delay(f2);
  ////////////////////////////////////////////////////////
  times(20, 20 , 0, 130); ao();
  times(90, 90 , 0, 180); ao();
  tag(40, 40 , 0, 20); ao();
  Turn(1, 50 , 40 );  ao();

  times(20, 20 , 0, 100);
  times(85, 85 , 0, 190); ao();
  tag(20, 20 , 0, 100); ao();
  fan(2);


  times(40, 40 , 1, 100);
  times(90, 90 , 1, 405); ao();
  tag(30, 30, 1, 115); ao();
  fan(4);

  times(20, 20 , 0, 100); ao();
  times(90, 90 , 0, 200);
  tag(20, 20 , 0, 58); ao();
  Turn(2, 45 , 25 );  ao();

  times(20, 20 , 0, 150);
  times(90, 90 , 0, 100); ao();
  tag(30, 30 , 0, 20); ao();
  fan(0);

  times(40, 40 , 1, 100);
  times(90, 90 , 1, 400); ao();
  tag(30, 30, 1, 1); ao();
  times(20, 20 , 0, 130); ao();
  f1 = f1 + 1;
  delay(f2);
  ////////////////////////////////////////////////////////
  times(20, 20 , 0, 130); ao();
  times(90, 90 , 0, 180); ao();
  tag(40, 40 , 0, 20); ao();
  Turn(1, 50 , 40 );  ao();

  times(20, 20 , 0, 100);
  times(85, 85 , 0, 190); ao();
  tag(20, 20 , 0, 100); ao();
  fan(4);


  times(40, 40 , 1, 100);
  times(90, 90 , 1, 405); ao();
  tag(30, 30, 1, 115); ao();
  fan(1);

  times(20, 20 , 0, 100); ao();
  times(90, 90 , 0, 200);
  tag(20, 20 , 0, 58); ao();
  Turn(2, 45 , 25 );  ao();

  times(20, 20 , 0, 150);
  times(90, 90 , 0, 100); ao();
  tag(30, 30 , 0, 20); ao();
  fan(0);

  times(40, 40 , 1, 100);
  times(90, 90 , 1, 400); ao();
  tag(30, 30, 1, 1); ao();
  times(20, 20 , 0, 130); ao();
  f1 = f1 + 1;
  delay(f2);
  ////////////////////////////////////////////////////////
  times(20, 20 , 0, 130); ao();
  times(90, 90 , 0, 180); ao();
  tag(40, 40 , 0, 20); ao();
  Turn(1, 50 , 40 );  ao();

  times(20, 20 , 0, 100);
  times(85, 85 , 0, 190); ao();
  tag(20, 20 , 0, 100); ao();
  fan(4);


  times(40, 40 , 1, 100);
  times(90, 90 , 1, 405); ao();
  tag(30, 30, 1, 115); ao();
  fan(2);

  times(20, 20 , 0, 100); ao();
  times(90, 90 , 0, 200);
  tag(20, 20 , 0, 58); ao();
  Turn(2, 45 , 25 );  ao();

  times(20, 20 , 0, 150);
  times(90, 90 , 0, 100); ao();
  tag(30, 30 , 0, 20); ao();
  fan(0);

  times(40, 40 , 1, 100);
  times(90, 90 , 1, 400); ao();
  tag(30, 30, 1, 1); ao();
  times(20, 20 , 0, 130); ao();
  f1 = f1 + 1;
  delay(f2);
  ////////////////////////////////////////////////////////
  times(20, 20 , 0, 130); ao();
  times(90, 90 , 0, 180); ao();
  tag(40, 40 , 0, 20); ao();
  Turn(1, 50 , 40 );  ao();

  times(20, 20 , 0, 100);
  times(85, 85 , 0, 190); ao();
  tag(20, 20 , 0, 100); ao();
  fan(4);


  times(40, 40 , 1, 100
  
  );
  times(90, 90 , 1, 405); ao();
  tag(30, 30, 1, 115  ); ao();
  fan(4);

  times(20, 20 , 0, 100); ao();
  times(90, 90 , 0, 200);
  tag(20, 20 , 0, 58); ao();
  Turn(2, 45 , 25 );  ao();

  times(20, 20 , 0, 150);
  times(90, 90 , 0, 100); ao();
  tag(30, 30 , 0, 20); ao();


  times(40, 40 , 1, 100);
  times(90, 90 , 1, 400); ao();
  tag(30, 30, 1, 1); ao();
  times(20, 20 , 0, 130); ao();
  f1 = f1 + 1;
  delay(f2);


































  //  //////////////////111
  //  times(85, 85 , 0, 210); ao();
  //  tag(40, 40 , 0, 20); ao();
  //  Turn(1, 50 , 40 );  ao();
  //
  //  times(20, 20 , 0, 100);
  //  times(85, 85 , 0, 200); ao();
  //  tag(20, 20 , 0, 180); ao();
  //  fan(4);
  //
  //
  //  times(40, 40 , 1, 100);
  //  times(85, 85 , 1, 440); ao();
  //  tag(30, 30, 1, 100); ao();
  //  fan(4);
  //
  //  times(85, 85 , 0, 250);
  //  tag(20, 20 , 0, 50); ao();
  //  Turn(2, 50 , 25 );  ao();
  //
  //  times(20, 20 , 0, 100);
  //  times(85, 85 , 0, 140); ao();
  //  tag(30, 30 , 0, 50); ao();
  //  fan(0);
  //
  //  times(40, 40 , 1, 100);
  //  times(85, 85 , 1, 400); ao();
  //  tag(30, 30, 1, 1); ao();
  //  f1 = f1 + 1;
  //  delay(f2);
  //  ///////////////////////////////////////2
  //  times(85, 85 , 0, 210); ao();
  //  tag(40, 40 , 0, 20); ao();
  //  Turn(1, 50 , 40 );  ao();
  //
  //  times(20, 20 , 0, 100);
  //  times(85, 85 , 0, 200); ao();
  //  tag(20, 20 , 0, 180); ao();
  //  fan(1);
  //
  //
  //  times(40, 40 , 1, 100);
  //  times(85, 85 , 1, 440); ao();
  //  tag(30, 30, 1, 100); ao();
  //  fan(4);
  //
  //  times(85, 85 , 0, 250);
  //  tag(20, 20 , 0, 50); ao();
  //  Turn(2, 50 , 25 );  ao();
  //
  //  times(20, 20 , 0, 100);
  //  times(85, 85 , 0, 140); ao();
  //  tag(30, 30 , 0, 50); ao();
  //  fan(0);
  //
  //  times(40, 40 , 1, 100);
  //  times(85, 85 , 1, 400); ao();
  //  tag(30, 30, 1, 1); ao();
  //  f1 = f1 + 1;
  //  delay(f2);
  //  ///////////////////////////////////////3
  //  times(85, 85 , 0, 210); ao();
  //  tag(40, 40 , 0, 20); ao();
  //  Turn(1, 50 , 40 );  ao();
  //
  //  times(20, 20 , 0, 100);
  //  times(85, 85 , 0, 200); ao();
  //  tag(20, 20 , 0, 180); ao();
  //  fan(2);
  //
  //
  //  times(40, 40 , 1, 100);
  //  times(85, 85 , 1, 440); ao();
  //  tag(30, 30, 1, 100); ao();
  //  fan(4);
  //
  //  times(85, 85 , 0, 250);
  //  tag(20, 20 , 0, 50); ao();
  //  Turn(2, 50 , 25 );  ao();
  //
  //  times(20, 20 , 0, 100);
  //  times(85, 85 , 0, 140); ao();
  //  tag(30, 30 , 0, 50); ao();
  //  fan(0);
  //
  //  times(40, 40 , 1, 100);
  //  times(85, 85 , 1, 400); ao();
  //  tag(30, 30, 1, 1); ao();
  //  f1 = f1 + 1;
  //  delay(f2);
  //  ///////////////////////////////////////4
  //  times(85, 85 , 0, 210); ao();
  //  tag(40, 40 , 0, 20); ao();
  //  Turn(1, 50 , 40 );  ao();
  //
  //  times(20, 20 , 0, 100);
  //  times(85, 85 , 0, 200); ao();
  //  tag(20, 20 , 0, 180); ao();
  //  fan(4);
  //
  //
  //  times(40, 40 , 1, 100);
  //  times(85, 85 , 1, 440); ao();
  //  tag(30, 30, 1, 100); ao();
  //  fan(1);
  //
  //  times(85, 85 , 0, 250);
  //  tag(20, 20 , 0, 50); ao();
  //  Turn(2, 50 , 25 );  ao();
  //
  //  times(20, 20 , 0, 100);
  //  times(85, 85 , 0, 140); ao();
  //  tag(30, 30 , 0, 50); ao();
  //  fan(0);
  //
  //  times(40, 40 , 1, 100);
  //  times(85, 85 , 1, 400); ao();
  //  tag(30, 30, 1, 1); ao();
  //  f1 = f1 + 1;
  //  delay(f2);
  //  ///////////////////////////////////////5
  //  times(85, 85 , 0, 210); ao();
  //  tag(40, 40 , 0, 20); ao();
  //  Turn(1, 50 , 40 );  ao();
  //
  //  times(20, 20 , 0, 100);
  //  times(85, 85 , 0, 200); ao();
  //  tag(20, 20 , 0, 180); ao();
  //  fan(4);
  //
  //
  //  times(40, 40 , 1, 100);
  //  times(85, 85 , 1, 440); ao();
  //  tag(30, 30, 1, 100); ao();
  //  fan(2);
  //
  //  times(85, 85 , 0, 250);
  //  tag(20, 20 , 0, 50); ao();
  //  Turn(2, 50 , 25 );  ao();
  //
  //  times(20, 20 , 0, 100);
  //  times(85, 85 , 0, 140); ao();
  //  tag(30, 30 , 0, 50); ao();
  //  fan(0);
  //
  //  times(40, 40 , 1, 100);
  //  times(85, 85 , 1, 400); ao();
  //  tag(30, 30, 1, 1); ao();
  //  f1 = f1 + 1;
  //  delay(f2);
  //  ///////////////////////////////////////6
  //  times(85, 85 , 0, 210); ao();
  //  tag(40, 40 , 0, 20); ao();
  //  Turn(1, 50 , 40 );  ao();
  //
  //  times(20, 20 , 0, 100);
  //  times(85, 85 , 0, 200); ao();
  //  tag(20, 20 , 0, 180); ao();
  //  fan(4);
  //
  //
  //  times(40, 40 , 1, 100);
  //  times(85, 85 , 1, 440); ao();
  //  tag(30, 30, 1, 100); ao();
  //  fan(4);
  //
  //  times(85, 85 , 0, 250);
  //  tag(20, 20 , 0, 50); ao();
  //  Turn(2, 50 , 25 );  ao();
  //
  //  times(20, 20 , 0, 100);
  //  times(85, 85 , 0, 140); ao();
  //  tag(30, 30 , 0, 50); ao();
  //
  //
  //  times(40, 40 , 1, 100);
  //  times(85, 85 , 1, 400); ao();
  //  tag(30, 30, 1, 1); ao();
  //  f1 = f1 + 1;
  //  delay(f2);

}
